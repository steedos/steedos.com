---
title: 公式
description: 公式引擎可以帮助非程序员快速实现一些简单的业务逻辑，类似Excel公式，它是从其他字段、表达式或值派生其值的一种算法，可以帮助您根据其他字段自动计算一个字段的值。
---

## 公式实例

```js
Total_Pay = 
IF(Total_Hours__c <= 40, Total_Hours__c * Hourly_Rate__c, 
40 * Hourly_Rate__c + 
(Total_Hours__c - 40) * Overtime_Rate__c)
```

## 跨对象引用

公式在服务端执行，因此可以在公式中引用当前记录相关表中的数据。

例如以下语法可以引用付款记录对应的合同记录对应的客户名称。

```js
  payment.contract.account.name
```

## 公式引擎的应用场景

- 字段默认值： 在用户创建记录时向自定义字段应用一个值。使用公式可以定义默认值。用户可以更改默认值。默认值可以由使用您指定的值、合并字段或表达式的公式确定。
- 公式字段： 使用您指定的值、合并字段或表达式。自动计算自定义字段的值。用户不能更改公式字段的值。
- 验证规则： 防止用户在标准/自定义字段中输入无效值。验证规则可以基于公式，并在用户输入无效值时，向用户显示出错消息。
- 字段更新： 自动将字段值更改为您指定的值。公式中可以包括其他值、合并字段或表达式。可以将字段更新设置为因工作流规则或批准过程而发生。
- 工作流规则： 定义记录触发工作流规则时必须满足的条件。
- 批准过程： 定义记录必须满足才能进入批准过程的条件。
- 批准步骤： 定义记录必须满足才能进入批准步骤的条件。
- 报表：报表中的自动计算字段。

## 公式中的数据类型

公式的数据类型决定预期从公式返回的数据的类型。

- 文本： 返回字符串。除公式输出外，若还要显示文本，请将该文本放入引号中。对文本、多行文本、网址、邮件地址和自动编号等字段使用文本数据类型。
- 布尔： 返回 true（真） 或false（假）。该字段在记录详细信息页面和报表中显示为复选框。使用 true 作为选中值，使用 false 作为未选中值。
- 金额：  只能输入数值内容，默认2位小数，也可以指定小数位数。
- 日期： 返回代表日历中某一天的日期。当前日期可通过在公式中调用内部函数 TODAY() 获得。
- 日期时间： 返回表示时间中某一时刻的数据。日期时间字段包括日期，还包括由小时、分钟和秒组成的一天中的时刻。您可以使用 NOW() 函数在公式中插入当前日期和时间。
- 数字： 返回正负整数或小数（最多 18 位）。系统对公式字段使用四舍五入平分规则。例如，12.345 变为 12.35 和 -12.345 变为 -12.35。
- 百分比： 返回后跟百分号的百分比格式数字（最多 18 位）。百分比数据存储为小数，值为除以 100 后得到的小数，即 90% 等于 0.90。


